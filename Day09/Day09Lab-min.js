window.onload=init;var Global={countries:[],countriesInJSON:[],temperaturesTableInstance:null,isUpdateTemperature:false,prodURL:"http://api.openweathermap.org/data/2.5/weather?q=city,country&units=metric&callback=test",devURL:"weather.jsp?q=city,country"};function init(){Global.temperaturesTableInstance=new Table(["Country","City","Max","Min","Time"],{border:"1",cellspacing:2,cellpadding:15});Global.temperaturesTableInstance.renderTo("#temperatures");initializeCountriesArray();displayTemperatures();window.setInterval("update()",4000)}function displayTemperatures(){for(var item in Global.countries){var country=item;var city=Global.countries[item];var url=Global.prodURL.replace("city",city).replace("country",country);Acct.ajax({url:url,success:function(response){eval(response)}})}}function constructCountriesInJSON(){for(var a in Global.countries){Global.countriesInJSON.push({country:a,city:Global.countries[a]})}}function getNextParams(){if(Global.countriesInJSON.length!=0){return Global.countriesInJSON.pop()}}function updateTemperaturesSeq(){var params=getNextParams();if(params){var city=params.city;var country=params.country;var url=Global.prodURL.replace("city",city).replace("country",country);document.getElementById(city).style.backgroundColor="red";Acct.ajax({url:url,success:function(response){eval(response);updateTemperaturesSeq()}})}}function updateTemperatures(){for(var item in Global.countries){var country=item;var city=Global.countries[item];var url=Global.URL.replace("city",city).replace("country",country);document.getElementById(city).style.backgroundColor="red";Acct.ajax({url:url,success:function(response){eval(response)}})}}function update(){Global.isUpdateTemperature=true;constructCountriesInJSON();updateTemperaturesSeq()}function test(c){if(Global.isUpdateTemperature){var b=c.name;var a=[c.sys.country,c.name,c.main.temp_max,c.main.temp_min,c.dt];Global.temperaturesTableInstance.updateRow(b,a)}else{var a=[c.sys.country,c.name,c.main.temp_max,c.main.temp_min,c.dt];console.log(a[1]);Global.temperaturesTableInstance.addRow(a,c.name)}}function initializeCountriesArray(){Global.countries.India="New Delhi";Global.countries.UK="London";Global.countries.Spain="Madrid";Global.countries.France="Paris";Global.countries.Japan="Tokyo"};